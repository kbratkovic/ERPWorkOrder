@page "/"
@page "/workOrders"

@inject WorkOrderModel WorkOrder;
@inject DialogService DialogService
@inject NavigationManager NavigationManager

@inherits OwningComponentBase<IWorkOrderRepository>


<PageTitle>Radni nalozi</PageTitle>

<NavLink href="@CreateNewWorkOrder" class="btn mb-4">
    <RadzenButton Text="Novi radni nalog" ButtonStyle="ButtonStyle.Secondary" />
</NavLink>





@code {
    private IWorkOrderRepository Repository => Service;
    public IEnumerable<WorkOrderModel> WorkOrderData { get; set; } = Enumerable.Empty<WorkOrderModel>();


    protected async override Task OnInitializedAsync()
    {
        await UpdateData();
    }


    public async Task UpdateData()
    {
        WorkOrderData = await Repository.WorkOrders.ToListAsync();
    }


    public string CreateNewWorkOrder => $"/workOrder/create";
    public string EditWorkOrder(int id) => $"/workOrder/edit/{id}";



    // RadzenDialog Demo
    //public int orderID = 12345;

    //public async Task OpenOrder()
    //{
    //    await DialogService.OpenAsync<Clients>($"Order {orderID}", null, null);
    //}


}
